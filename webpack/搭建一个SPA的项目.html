<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>搭建一个SPA的项目</title>
    <link rel="stylesheet" href="/public/css/index.css">
    <link rel="stylesheet" href="/public/css/monokai-sublime.min.css">
</head>

<body>
    <div id="root">
        <div class="menu">
            <div class="top">
                不止于前端
            </div>
            <ul>
                <li class="submenu">
                    <a href=javacript:void(0);>
                        nodejs
                    </a>
                    <ul>
                <li class="submenu">
                    <a href=/nodejs/常用内置模块.html>
                        常用内置模块
                    </a>
                    
                </li>
                </ul>
                </li>
                
                <li class="submenu">
                    <a href=javacript:void(0);>
                        webpack
                    </a>
                    <ul>
                <li class="submenu">
                    <a href=/webpack/搭建一个SPA的项目.html>
                        搭建一个SPA的项目
                    </a>
                    
                </li>
                
                <li class="submenu">
                    <a href=/webpack/搭建一个SSR的项目.html>
                        搭建一个SSR的项目
                    </a>
                    
                </li>
                </ul>
                </li>
                
                <li class="submenu">
                    <a href=javacript:void(0);>
                        跨端
                    </a>
                    <ul>
                <li class="submenu">
                    <a href=/跨端/react-native环境搭建.html>
                        react-native环境搭建
                    </a>
                    
                </li>
                </ul>
                </li>
                </ul>
        </div>
        <div id="content">
            <h1>
                搭建一个SPA的项目
            </h1>
            <h1>如何自定义实现一个类似于create-react-app的项目?</h1>
<h2>一.创建项目&amp;安装依赖;</h2>
<ul>
<li>初始化</li>
</ul>
<pre class="hljs"><code>mkdir webpack-react-app &amp;&amp; cd ./webpack-react-app
npm init 
</code></pre>
<ul>
<li>安装 webpack</li>
</ul>
<pre class="hljs"><code>npm i webpack webpack-cli webpack-dev-server webpackbar webpack-merge html-webpack-plugin -D 
</code></pre>
<ul>
<li>安装 babel</li>
</ul>
<pre class="hljs"><code>npm i babel-loader babel-preset-xin sass sass-loader style-loader css-loader -D 
</code></pre>
<ul>
<li>安装 react</li>
</ul>
<pre class="hljs"><code>npm i react react-dom react-router-dom -S 
</code></pre>
<h2>二.编写webpack配置 &amp; babel配置</h2>
<pre class="hljs"><code>touch webpack.config.js &amp;&amp; touch babel.confi.js
</code></pre>
<pre class="hljs"><code><span class="hljs-comment">//webpack.config.js</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;html-webpack-plugin&#x27;</span>);

<span class="hljs-variable language_">module</span> <span class="hljs-built_in">exports</span> = {
    <span class="hljs-attr">mode</span>:<span class="hljs-string">&#x27;development&#x27;</span>
    <span class="hljs-attr">entry</span>:<span class="hljs-string">&#x27;./main.js&#x27;</span>,
    <span class="hljs-attr">output</span>:{
        <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;src/[name].[chunkhash:8].js&#x27;</span>,
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;../dist&#x27;</span>),
    },
    <span class="hljs-attr">module</span>:{
        <span class="hljs-attr">rules</span>:[
             {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.module\.s?css$/</span>,
                <span class="hljs-attr">use</span>: [
                    <span class="hljs-string">&#x27;style-loader&#x27;</span>,
                    {
                        <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;css-loader&#x27;</span>,
                        <span class="hljs-attr">options</span>: {
                            <span class="hljs-attr">modules</span>: {
                                <span class="hljs-attr">localIdentName</span>: <span class="hljs-string">&#x27;[name]--[hash:base64:5]&#x27;</span>,
                            },
                        },
                    },
                    <span class="hljs-string">&#x27;sass-loader&#x27;</span>,
                ],
             },
             {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(jpe?g|png|svg|gif|webp)$/</span>,
                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;asset/resource&#x27;</span>,
                <span class="hljs-attr">generator</span>: {
                    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;images/[name].[contenthash:8][ext]&#x27;</span>
                }
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(t|j)sx?$/</span>,
                <span class="hljs-comment">// exclude: [&#x27;node_moduels&#x27;, &#x27;dist&#x27;],</span>
                <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;../src&#x27;</span>),
                <span class="hljs-attr">use</span>: [
                    {
                        <span class="hljs-attr">loader</span>: <span class="hljs-string">&#x27;babel-loader&#x27;</span>,
                        <span class="hljs-attr">options</span>: {
                            <span class="hljs-attr">cacheDirectory</span>: <span class="hljs-literal">true</span>
                        }
                    }
                ]
            }
        ]
    },
    <span class="hljs-attr">plugins</span>:[
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
            <span class="hljs-attr">template</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;../public/index.html&#x27;</span>),
            <span class="hljs-attr">filename</span>: <span class="hljs-string">`<span class="hljs-subst">${name}</span>.html`</span>,
            <span class="hljs-attr">minify</span>: {
                <span class="hljs-attr">removeAttributeQuotes</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">collapseWhitespace</span>: <span class="hljs-literal">true</span>
            },
            <span class="hljs-comment">//给脚本添加哈希值</span>
            <span class="hljs-attr">hash</span>: <span class="hljs-literal">true</span>,
        })
    ],
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">alias</span>: {
            <span class="hljs-title class_">Src</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;../src&#x27;</span>),
        },
        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;.js&#x27;</span>, <span class="hljs-string">&#x27;.jsx&#x27;</span>, <span class="hljs-string">&#x27;.ts&#x27;</span>, <span class="hljs-string">&#x27;.tsx&#x27;</span>],
    },
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">&#x27;cheap-module-source-map&#x27;</span>,
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,
        <span class="hljs-attr">port</span>: <span class="hljs-string">&#x27;3000&#x27;</span>,
        <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">client</span>: {
            <span class="hljs-attr">overlay</span>: {
                <span class="hljs-attr">errors</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">warnings</span>: <span class="hljs-literal">false</span>,
            }
        },
    }
}
</code></pre>
<pre class="hljs"><code><span class="hljs-comment">//babel.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">presets</span>: [<span class="hljs-string">&#x27;babel-preset-xin&#x27;</span>]
};

</code></pre>
<h2>三.创建入口文件 &amp; 编写路由和组件</h2>
<pre class="hljs"><code>touch main.js &amp;&amp; mkdir src;
</code></pre>
<pre class="hljs"><code><span class="hljs-comment">//main.js</span>
<span class="hljs-keyword">import</span> { createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom/client&#x27;</span>;
<span class="hljs-keyword">import</span> { createBrowserRouter, <span class="hljs-title class_">RouterProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;
<span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./routes&#x27;</span>;

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>(routes);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">width</span>=<span class="hljs-string">{200}</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{imgSrc}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
};
<span class="hljs-keyword">const</span> root = <span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#root&#x27;</span>));
root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
</code></pre>
<pre class="hljs"><code><span class="hljs-comment">//routes.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;
<span class="hljs-comment">//import Home from &#x27;Src/pages/home&#x27;;</span>

<span class="hljs-keyword">const</span> routes = [
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,
        <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
    },
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,
        <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
    },
];

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> routes;
</code></pre>
<h2>四.使用webpack-dev-server启动服务</h2>
<pre class="hljs"><code>    webpack server --<span class="hljs-built_in">env</span> development --config webpack.config.js
</code></pre>
<h2><a href="https://github.com/Lojaxin/webpack5-react">项目地址</a></h2>

        </div>
    </div>
    <script src="/public/js/menu.js"></script>
</body>

</html>